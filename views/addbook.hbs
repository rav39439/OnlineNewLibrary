<h1>{{title}}</h1>

<form action="/postbook" method="POST">
  <div class="form-group">
    <label for="exampleInputEmail1">Bookname</label>
    <input type="text" name="Bookname" class="form-control" id="exampleInputEmail1" aria-describedby="emailHelp" style="width:700px">
  </div>
  <div class="form-group">
    <label for="exampleInputPassword1">BookTopic</label>
    <input type="text" name="Booktopic" class="form-control" id="exampleInputPassword1" style="width:700px">
  </div>
 
  <select  id="cars"name="category">
  <option value="Physics">Physics</option>
  <option value="Chemistry">Chemistry</option>
  <option value="Maths">Maths</option>
  <option value="story">Story</option>
</select>
 
  <div class="form-group">
    <label for="exampleInputPassword1">Bookauthor</label>
    <input type="text" name="Bookauthor" class="form-control" id="exampleInputPassword1" style="width:700px">
  </div>
  <div class="form-group">
    <label for="exampleInputPassword1">BookRating</label>
    <input type="number" name="Bookrating"class="form-control" id="exampleInputPassword1" style="width:700px">
  </div>
  <div class="form-group">
    <label for="exampleInputPassword1">NumberofPages</label>
    <input type="text" name="NumberofPages" class="form-control" id="exampleInputPassword1" style="width:700px">
  </div>
 <select  id="cars" name="status">
  <option value="Not Assigned">Not assigned</option>
  <option value="Assigned">assigned</option>
  
</select>

 <div class="form-group">
    <label for="exampleInputPassword1">userid</label>
    <input type="text" name="userid" class="form-control" id="exampleInputPassword1" style="width:700px"readonly>
  </div>
 <div class="form-group">
    <label for="exampleInputPassword1">returnDate</label>
    <input type="date" name="returnDate" class="form-control" id="exampleInputPassword1" style="width:700px"readonly>
  </div>
 <div class="form-group">
    <label for="exampleInputPassword1">issueDate</label>
    <input type="date" name="issueDate"  class="form-control" id="exampleInputPassword1" style="width:700px"readonly>
  </div>



 <div class="form-group">
    <label for="exampleInputPassword1">imageurl</label>
    <input type="text" name="image"  class="form-control" id="imgd" style="width:700px"readonly>
  </div>
  <button type="submit" class="btn btn-primary">Submit</button>
</form>


  <h1>Upload files to database</h1>
    <img src="" id="newimage" style="width:200px;height:200px;"><br>
    <input type="file" id="photo" /><br>

 <button onclick="uploadImage()">Upload Image</button>




<div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"aria-hidden="true">
        <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel1">
                Upload Image
                </h4>
                <button type="button"class="close"data-dismiss="modal"aria-hidden="true">
                    x
                </button>
            </div>       
           
            <div class="modal-body">
                <form method="POST" action="" enctype="multipart/form-data" id="form-upload">
                <div class="form-group">
                    <input type="file" name="file" id="file" class="form-control">
                </div>
                <input type="submit"class="btn btn-success" value="Upload">
                </form>
              
            </div>
        </div>
        </div>
      </div>


      <div class="modal fade" id="myModal1" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"aria-hidden="true">
        <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="myModalLabel">
                Upload Image
                </h4>
                <button type="button"class="close"data-dismiss="modal"aria-hidden="true">
                    x
                </button>
            </div>       
           
            <div class="modal-body">
                <form method="POST" action="" enctype="multipart/form-data" id="form-upload1">
                <div class="form-group">
                    <input type="file" name="file" id="file1" class="form-control">
                </div>
                <input type="submit"class="btn btn-success" value="Upload">
                </form>
              
            </div>
        </div>
        </div>
    </div>


<script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.7.0/firebase-storage.js"></script>

  
<script>


function showdialog(data){
   let myid=data.id
    $("#myModal").modal("show")

}
function showdialog1(data){
   let myid=data.id
    $("#myModal1").modal("show")

}

const firebaseConfig = {
    apiKey: "AIzaSyAZ9x_QbhCfY9aEsqxEiYhWtfIRNGl_qeo",
    authDomain: "mynewproject-ae49a.firebaseapp.com",
    projectId: "mynewproject-ae49a",
    storageBucket: "mynewproject-ae49a.appspot.com",
    messagingSenderId: "939005557600",
    appId: "1:939005557600:web:ee766070db4bd2dadfbc05",
    measurementId: "G-YFKTT151SN"
  };

firebase.initializeApp(firebaseConfig);
    console.log(firebase);


    async function uploadImage() {
     
      const ref = firebase.storage().ref();
      const file = document.querySelector("#photo").files[0];
      const name = +new Date() + "-" + file.name;
      const metadata = {
        contentType: file.type
      };
     // function mydata(callback){
         try{
      await ref.child(name).put(file, metadata).then(snapshot => snapshot.ref.getDownloadURL())
        .then(url => {
            newurl=url

            callback(url)
            //localStorage.setItem("url",url)
          //console.log(url);
         
        })
    }
    catch(err){
        console.log(err)
    }

   // }

   function callback(url){
       console.log(url)
       newcallback(url)
     //newurl=url
   }
    }
    
function newcallback(url){

 document.getElementById('imgd').value=url
   
}
    

  
</script>